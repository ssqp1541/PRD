# 현재 테스트 커버리지 현황

> 실시간 테스트 커버리지 리포트 (2025-12-15 업데이트)

## 📊 전체 현황

**현재 단계**: 🔴 **Red (TDD)** - 실패하는 테스트 작성 완료  
**총 테스트 케이스**: **27개**  
**작성된 테스트 파일**: **4개**

---

## 📈 기능별 테스트 커버리지

### ✅ FR1: 투명 정보 추적 (완료)

| 구분 | 테스트 케이스 | 파일 | 상태 |
|------|-------------|------|------|
| **백엔드** | 5개 | `backend/tests/modules/tracking/productTracking.test.js` | ✅ 완료 |
| **프론트엔드** | 5개 | `frontend/src/pages/Product/__tests__/ProductTracking.test.jsx` | ✅ 완료 |
| **합계** | **10개** | - | ✅ 완료 |

**테스트 케이스 상세**:
- API 엔드포인트 테스트
- 생산자 수익 비율 검증
- 농장 위치 정보 검증
- 원산지 정보 검증
- 에러 처리 (404)

---

### ✅ FR2: 윤리 영향 리포트 (완료)

| 구분 | 테스트 케이스 | 파일 | 상태 |
|------|-------------|------|------|
| **백엔드** | 9개 | `backend/tests/modules/tracking/ethicalImpact.test.js` | ✅ 완료 |
| **프론트엔드** | 8개 | `frontend/src/pages/MyPage/__tests__/EthicalImpact.test.jsx` | ✅ 완료 |
| **합계** | **17개** | - | ✅ 완료 |

**테스트 케이스 상세**:
- API 엔드포인트 테스트
- 탄소 발자국 절감량 검증
- 3개월간 구매 기록 집계
- 친환경 원두 필터링
- 긍정적인 메시지 생성
- 에러 처리 (404, 빈 데이터)
- 탄소 발자국 계산 로직
- 월별 집계 데이터

---

### ⚪ FR3: 맞춤형 주문 시스템 (미작성)

| 구분 | 테스트 케이스 | 파일 | 상태 |
|------|-------------|------|------|
| **백엔드** | - | - | ⚪ 미작성 |
| **프론트엔드** | - | - | ⚪ 미작성 |
| **합계** | **0개** | - | ⚪ 미작성 |

---

### ⚪ FR4: 데이터 검증 (미작성)

| 구분 | 테스트 케이스 | 파일 | 상태 |
|------|-------------|------|------|
| **백엔드** | - | - | ⚪ 미작성 |
| **프론트엔드** | - | - | ⚪ 미작성 |
| **합계** | **0개** | - | ⚪ 미작성 |

---

### ⚪ FR5: 파트너 관리 (미작성)

| 구분 | 테스트 케이스 | 파일 | 상태 |
|------|-------------|------|------|
| **백엔드** | - | - | ⚪ 미작성 |
| **프론트엔드** | - | - | ⚪ 미작성 |
| **합계** | **0개** | - | ⚪ 미작성 |

---

## 📊 통계 요약

### 전체 테스트 현황

| 항목 | 수량 |
|------|------|
| **총 테스트 파일** | 4개 |
| **총 테스트 케이스** | 27개 |
| **백엔드 테스트 케이스** | 14개 |
| **프론트엔드 테스트 케이스** | 13개 |
| **완료된 기능** | 2개 (FR1, FR2) |
| **미작성 기능** | 3개 (FR3, FR4, FR5) |

### 기능별 진행률

```
FR1: ████████████████████ 100% (10/10 테스트)
FR2: ████████████████████ 100% (17/17 테스트)
FR3: ░░░░░░░░░░░░░░░░░░░░   0% (0/12 예상)
FR4: ░░░░░░░░░░░░░░░░░░░░   0% (0/12 예상)
FR5: ░░░░░░░░░░░░░░░░░░░░   0% (0/13 예상)
────────────────────────────────────────────
전체: ████████░░░░░░░░░░░░  40% (27/64 예상)
```

### 백엔드 vs 프론트엔드

| 구분 | 테스트 케이스 | 비율 |
|------|-------------|------|
| **백엔드** | 14개 | 51.9% |
| **프론트엔드** | 13개 | 48.1% |
| **합계** | 27개 | 100% |

---

## 🎯 커버리지 목표 대비 현황

### MVP 목표 (Phase 0)

| 모듈 | 목표 커버리지 | 현재 상태 | 진행률 |
|------|-------------|----------|--------|
| **FR1: 투명 정보 추적** | 80% 이상 | 🔴 테스트 작성 완료 | 100% (테스트) |
| **FR2: 윤리 영향 리포트** | 70% 이상 | 🔴 테스트 작성 완료 | 100% (테스트) |
| **FR3: 맞춤형 주문 시스템** | 75% 이상 | ⚪ 미작성 | 0% |
| **FR4: 데이터 검증** | 60% 이상 | ⚪ 미작성 | 0% |
| **FR5: 파트너 관리** | 70% 이상 | ⚪ 미작성 | 0% |

### 코드 커버리지 (실행 시)

**현재 예상 커버리지**: 0%
- 이유: 구현 코드가 없음 (TDD Red 단계)
- 이는 의도된 상태입니다.

**Green 단계 후 예상 커버리지**: 60-70%
- 최소한의 구현으로 테스트 통과 시

**Refactor 단계 후 목표 커버리지**: 80% 이상
- 코드 개선 및 추가 테스트 작성 후

---

## 📝 테스트 실행 방법

### 커버리지 리포트 생성

```bash
# 백엔드 테스트 커버리지
cd backend
npm install  # 의존성 설치 (최초 1회)
npm run test:coverage

# 프론트엔드 테스트 커버리지
cd frontend
npm install  # 의존성 설치 (최초 1회)
npm run test:coverage
```

### 커버리지 리포트 확인

테스트 실행 후 다음 위치에서 HTML 리포트를 확인할 수 있습니다:

- **백엔드**: `backend/coverage/index.html`
- **프론트엔드**: `frontend/coverage/index.html`

---

## 🔍 커버리지 분석 항목

Jest 커버리지 리포트는 다음 4가지 항목을 측정합니다:

1. **Statements (문장)**: 코드 문장 실행 비율
2. **Branches (분기)**: 조건문 분기 실행 비율
3. **Functions (함수)**: 함수 실행 비율
4. **Lines (라인)**: 코드 라인 실행 비율

### 예상 커버리지 리포트 형식

```
-------------------|---------|----------|---------|---------|
File               | % Stmts | % Branch | % Funcs | % Lines |
-------------------|---------|----------|---------|---------|
All files          |    0.00 |     0.00 |    0.00 |    0.00 |
 tracking/         |    0.00 |     0.00 |    0.00 |    0.00 |
  productTracking  |    0.00 |     0.00 |    0.00 |    0.00 |
  ethicalImpact    |    0.00 |     0.00 |    0.00 |    0.00 |
-------------------|---------|----------|---------|---------|
```

> **참고**: 현재는 구현이 없어 커버리지가 0%입니다. 이는 TDD의 Red 단계로 정상입니다.

---

## 📅 다음 단계

### 즉시 진행 가능

1. **Green 단계**: FR1, FR2 최소 구현
   - 예상 커버리지: 60-70%
   - 예상 소요 시간: 4-6시간

2. **Phase 2**: FR3 테스트 작성
   - 예상 테스트 케이스: 12개
   - 예상 소요 시간: 3-4시간

### 중기 계획

3. **Phase 3**: FR5 테스트 작성
4. **Phase 4**: FR4 테스트 작성
5. **Refactor 단계**: 코드 개선 및 커버리지 80% 이상 달성

---

## 📚 참고 자료

- [Jest Coverage Documentation](https://jestjs.io/docs/cli#--coverage)
- [Istanbul Coverage Tool](https://istanbul.js.org/)
- [TDD Best Practices](https://kentcdodds.com/blog/common-mistakes-with-react-testing-library)

---

**마지막 업데이트**: 2025-12-15  
**현재 단계**: Red (실패하는 테스트 작성 완료)  
**다음 업데이트**: Green 단계 완료 후

