# 테스트 케이스 작성 계획서

> README.md 기반 실패하는 테스트 작성 순서 및 승인 계획

**작성일**: 2025-12-15  
**기준 문서**: README.md  
**현재 상태**: FR1 테스트 작성 완료, FR2-FR5 테스트 작성 필요

---

## 📋 목차

1. [현재 상태](#현재-상태)
2. [테스트 케이스 정의](#테스트-케이스-정의)
3. [작업 순서](#작업-순서)
4. [승인 체크리스트](#승인-체크리스트)

---

## 현재 상태

### 완료된 작업 ✅

- [x] **FR1: 투명 정보 추적** - 테스트 작성 완료
  - 백엔드 테스트: 5개 케이스
  - 프론트엔드 테스트: 5개 케이스

### 진행 필요 작업 ⚪

- [ ] **FR2: 윤리 영향 리포트** - 테스트 미작성
- [ ] **FR3: 맞춤형 주문 시스템** - 테스트 미작성
- [ ] **FR4: 데이터 검증 (관리)** - 테스트 미작성
- [ ] **FR5: 파트너 관리 (관리)** - 테스트 미작성

---

## 테스트 케이스 정의

### FR1: 투명 정보 추적 ✅ (완료)

**사용자 스토리**:
```
Given 고객이 특정 원두 상세 페이지에 접속했을 때
When 고객이 '원두 스토리 추적' 탭을 클릭하면
Then 생산자에게 돌아간 수익 비율 및 원산지 농장의 위치가 지도로 시각화되어 표시되어야 한다.
```

**테스트 케이스**:
- ✅ 백엔드: API 엔드포인트 테스트 (5개)
- ✅ 프론트엔드: 컴포넌트 테스트 (5개)

---

### FR2: 윤리 영향 리포트 ⚪

**사용자 스토리**:
```
Given 고객이 3개월간 친환경 원두만 구매한 기록이 있을 때
When 고객이 마이페이지의 '나의 윤리적 영향' 섹션을 클릭하면
Then '누적 커피 탄소 발자국 절감량' 수치와 함께, 긍정적인 메시지가 표시되어야 한다.
```

**예상 테스트 케이스**:

#### 백엔드 테스트
1. `GET /api/users/:userId/ethical-impact` - 200 상태 코드
2. 탄소 발자국 절감량 계산 검증
3. 3개월간 구매 기록 집계 검증
4. 친환경 원두 필터링 검증
5. 긍정적인 메시지 생성 검증
6. 구매 기록이 없는 경우 처리

#### 프론트엔드 테스트
1. '나의 윤리적 영향' 섹션 렌더링
2. 탄소 발자국 절감량 수치 표시
3. 긍정적인 메시지 표시
4. 데이터 로딩 상태 처리
5. 에러 상태 처리

**예상 파일**:
- `backend/tests/modules/tracking/ethicalImpact.test.js`
- `frontend/src/pages/MyPage/__tests__/EthicalImpact.test.jsx`

---

### FR3: 맞춤형 주문 시스템 ⚪

**사용자 스토리**:
```
Given 고객이 원두 검색 페이지에 접속했을 때
When 고객이 필터 조건으로 '여성 생산자 커피'와 '친환경 포장재 사용'을 모두 선택하고 검색하면
Then 두 가지 기준을 모두 충족하는 원두 상품만 표시되어야 한다.
```

**예상 테스트 케이스**:

#### 백엔드 테스트
1. `GET /api/products/search` - 필터 파라미터 처리
2. '여성 생산자' 필터 검증
3. '친환경 포장재' 필터 검증
4. 다중 필터 조합 검증
5. 필터 결과 정확성 검증
6. 빈 결과 처리

#### 프론트엔드 테스트
1. 검색 페이지 렌더링
2. 필터 UI 렌더링
3. 필터 선택 동작
4. 검색 버튼 클릭
5. 필터링된 결과 표시
6. 필터 초기화 기능

**예상 파일**:
- `backend/tests/modules/commerce/productSearch.test.js`
- `frontend/src/pages/Product/__tests__/ProductSearch.test.jsx`

---

### FR4: 데이터 검증 (관리) ⚪

**사용자 스토리**:
```
Given 파트너가 원두 배치(Batch)의 핵심 데이터를 등록하고 관리자에게 승인 요청했을 때
When 관리자가 관리자 대시보드에서 데이터를 검토하고 '승인' 버튼을 클릭하면
Then 해당 데이터는 즉시 변조 불가능한 분산원장(블록체인)에 기록되어야 한다.
```

**예상 테스트 케이스**:

#### 백엔드 테스트
1. `POST /api/admin/batches/:id/approve` - 승인 API
2. 배치 데이터 검증 로직
3. 블록체인 기록 검증
4. 승인 권한 검증 (관리자만)
5. 거부 처리 검증
6. 블록체인 실패 시 롤백

#### 프론트엔드 테스트
1. 관리자 대시보드 렌더링
2. 승인 대기 목록 표시
3. 데이터 상세 정보 표시
4. 승인 버튼 클릭
5. 승인 완료 피드백
6. 블록체인 기록 상태 표시

**예상 파일**:
- `backend/tests/modules/admin/batchApproval.test.js`
- `frontend/src/pages/Admin/__tests__/BatchApproval.test.jsx`

---

### FR5: 파트너 관리 (관리) ⚪

**사용자 스토리**:
```
Given 입점 로스터리 관리자가 파트너 전용 대시보드에 접속했을 때
When 관리자가 '정산 보고서' 탭을 선택하고 기간을 설정하면
Then 총 판매액, 플랫폼 수수료, 최종 정산 예정 금액이 명확하게 표시되어야 한다.
```

**예상 테스트 케이스**:

#### 백엔드 테스트
1. `GET /api/partner/settlement` - 정산 데이터 조회
2. 기간별 판매액 집계
3. 플랫폼 수수료 계산
4. 최종 정산 금액 계산
5. 기간 필터링 검증
6. 권한 검증 (파트너만)

#### 프론트엔드 테스트
1. 파트너 대시보드 렌더링
2. '정산 보고서' 탭 렌더링
3. 기간 선택 UI
4. 정산 데이터 표시
5. 총 판매액 표시
6. 플랫폼 수수료 표시
7. 최종 정산 금액 표시

**예상 파일**:
- `backend/tests/modules/partner/settlement.test.js`
- `frontend/src/pages/Partner/__tests__/SettlementReport.test.jsx`

---

## 작업 순서

### Phase 1: FR2 테스트 작성 (우선순위 1)

**이유**: 
- FR1 다음으로 핵심 기능
- 데이터 집계 로직 테스트 필요
- MVP 목표에 포함

**작업 내용**:
1. 백엔드 테스트 파일 생성
2. 프론트엔드 테스트 파일 생성
3. 테스트 케이스 작성 (예상 11개)
4. 테스트 실행 및 실패 확인

**예상 소요 시간**: 2-3시간

---

### Phase 2: FR3 테스트 작성 (우선순위 2)

**이유**:
- 사용자 핵심 플로우 (검색 → 주문)
- 필터링 로직 복잡도 높음
- MVP 목표에 포함

**작업 내용**:
1. 백엔드 테스트 파일 생성
2. 프론트엔드 테스트 파일 생성
3. 테스트 케이스 작성 (예상 12개)
4. 테스트 실행 및 실패 확인

**예상 소요 시간**: 3-4시간

---

### Phase 3: FR5 테스트 작성 (우선순위 3)

**이유**:
- 관리자 기능이지만 비즈니스 중요
- 정산 로직 복잡도 중간
- FR4보다 구현 난이도 낮음

**작업 내용**:
1. 백엔드 테스트 파일 생성
2. 프론트엔드 테스트 파일 생성
3. 테스트 케이스 작성 (예상 13개)
4. 테스트 실행 및 실패 확인

**예상 소요 시간**: 3-4시간

---

### Phase 4: FR4 테스트 작성 (우선순위 4)

**이유**:
- 블록체인 연동 복잡도 높음
- MVP에서는 모의(Mock) 구현 가능
- 기술 부채로 관리 가능

**작업 내용**:
1. 백엔드 테스트 파일 생성 (Mock 블록체인)
2. 프론트엔드 테스트 파일 생성
3. 테스트 케이스 작성 (예상 12개)
4. 테스트 실행 및 실패 확인

**예상 소요 시간**: 4-5시간

---

## 승인 체크리스트

### 전체 계획 승인

- [ ] **Phase 1 (FR2) 작업 승인**
  - 작업 범위 검토
  - 예상 소요 시간 확인
  - 테스트 케이스 검토

- [ ] **Phase 2 (FR3) 작업 승인**
  - 작업 범위 검토
  - 예상 소요 시간 확인
  - 테스트 케이스 검토

- [ ] **Phase 3 (FR5) 작업 승인**
  - 작업 범위 검토
  - 예상 소요 시간 확인
  - 테스트 케이스 검토

- [ ] **Phase 4 (FR4) 작업 승인**
  - 작업 범위 검토
  - 예상 소요 시간 확인
  - Mock 구현 전략 확인

### 단계별 승인

각 Phase 완료 후 다음을 확인:

- [ ] 테스트 파일 생성 완료
- [ ] 모든 테스트 케이스 작성 완료
- [ ] 테스트 실행 및 실패 확인
- [ ] 코드 리뷰 (선택사항)
- [ ] 다음 Phase 진행 승인

---

## 작업 시작 승인 요청

### 다음 작업 제안

**Phase 1: FR2 테스트 작성**을 시작하시겠습니까?

**작업 내용**:
1. `backend/tests/modules/tracking/ethicalImpact.test.js` 생성
2. `frontend/src/pages/MyPage/__tests__/EthicalImpact.test.jsx` 생성
3. 총 11개 테스트 케이스 작성
4. 테스트 실행 및 실패 확인

**예상 결과**:
- 모든 테스트가 실패 (구현 코드 없음)
- TDD Red 단계 완료

**승인 여부**: 
- [ ] 승인 - Phase 1 작업 시작
- [ ] 보류 - 추가 검토 필요
- [ ] 수정 요청 - 계획 변경 필요

---

## 참고사항

- 모든 테스트는 **실패하는 테스트**로 작성됩니다 (TDD Red 단계)
- 구현 코드는 작성하지 않습니다 (Green 단계에서 진행)
- 테스트 실행 시 의존성 설치가 필요할 수 있습니다
- 각 Phase는 독립적으로 진행 가능합니다

---

**작성일**: 2025-12-15  
**승인 대기 중**: Phase 1 작업 시작 승인

